<!-- here is the markup for the search box -->

<!-- <div class='searchcontainer'>
	<h3>Search for a wifi location near you</h3>
	    <input type="search" name="location-search" id="location-input" oninput="autoComplete()" class="form-control" value="" required="required" title="Find Places">
	    <h4>Radius</h4>
	    <input type="number" name="location-radius" id="inputLocation-Radius" class="form-control" value="" min="2" max="" step="1" required="required" title="">
	    <button type="button" class="btn btn-default" onclick="codeAddress()">Search</button>
	    <h4><%= link_to 'New Venue', new_venue_path %></h4>
</div>
 -->

<%= form_tag venues_path, :method => 'get' do %>
<p>
  <div class="row">
    <div class="col-xs-6 col-sm-6 col-md-6 col-lg-6">
      <%= text_field_tag :search, params[:search], class:"form-control", placeholder:"Find Wifi Enabled Venues Near ...", oninput:"autoComplete2()" %>  
    </div>
    <div class="col-xs-2 col-sm-2 col-md-2 col-lg-2"><%= select_tag :per, options_for_select([10,25,50,100,500,"all"]), {class: "form-control"} %></div>
      <div class="col-xs-4 col-sm-4 col-md-4 col-lg-4">
        <%= submit_tag "Search", :name => nil, class:"btn btn-primary" %>
        <%= link_to "Clear Search", venues_path, class: "btn btn-warning" %>
      </div>   
  </div>
  <div class="row">
    <%= check_box_tag 'charging_sockets', 'true', params[:charging_sockets] %> 
    <%= label_tag 'Charging Sockets' %>
    <%= check_box_tag 'food_served', 'true', params[:food_served] %> 
    <%= label_tag 'Food Served' %>
    <%= check_box_tag 'tables', 'true', params[:tables] %> 
    <%= label_tag 'tables' %>
    <%= check_box_tag 'quiet', 'true', params[:quiet] %> 
    <%= label_tag 'Quiet' %>
    <%= check_box_tag 'free_wifi', 'true', params[:free_wifi] %> 
    <%= label_tag 'Free Wifi' %>
  </div>

</p>
<% end %>



<script>
 function codeAddress() {
    // var geocoder
    // geocoder = new google.maps.Geocoder();
    console.log(handler);
    // handler = Gmaps.build('Google');
    var address = document.getElementById('search').value;
    geocoder.geocode( { 'address': address}, function(results, status) {
      if (status == google.maps.GeocoderStatus.OK) {
        console.log(results);
        handler.getMap().setCenter(results[0].geometry.location);
        // var marker = new google.maps.Marker({
        //     map: handler.getMap(),
        //     position: results[0].geometry.location
        // });
      } else {
        alert('Geocode was not successful for the following reason: ' + status);
      }
    });
  }

  function autoComplete2(){
    var query = document.getElementById('search').value;
    geocoder.geocode({'address': query}, function(results, status){
      if (status == google.maps.GeocoderStatus.OK){
        choices = [];
        for (var i = results.length - 1; i >= 0; i--) {
          choices.push(results[i].formatted_address);
        };
        console.log(choices);
        trial = ["one","two","three"];
        console.log(trial);
        // completebox = document.getElementById("location-input");
        completebox = $('#search');
        // completebox.autocomplete("enable");
        completebox.autocomplete({source: choices});
        console.log('choices');      
        // completebox.autocomplete({source: trial});
      }
    })

  }

 </script>